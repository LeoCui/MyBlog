---
title: 信息安全的一些问题
date: 2017-08-24 16:38:56
tags:
	- 信息安全
	- ssh
categories: 信息安全
---

* ssh的原理：
	* ssh 是用来保证安全登录的，保证密码不被别人截获，默认端口为22
	* ssh登录时，服务器先发给你一个公钥，然后用户把密码用公钥加密后发给服务器，服务器用私钥解密。
	* known hosts: 但是这种方法容易被中间人攻击，即有人伪造服务器。所以在登录时服务器会把自己的公钥发给你，问你是否同意连接。当你同意的时候就会存到known_hosts文件中，里面是受信任的服务器的公钥。
	* 密钥登录：但是这样还是需要每次都输入密码。密钥登录就是用户在本地用rsa生成密钥对。公钥放在服务器上，登录时，服务器先发来一个随机的字符串，用户用私钥加密后传给服务器，服务器用公钥解密，如果解密成功，就说明登录成功。私钥加密，公钥解密，就是所谓的签名了。github的ssh登录就是这样做的。
	* authorized_keys: 里面存的是一些公钥，公钥对应的用户可以直接通过密钥登录。类似于github让你放公钥的地方。authorized_keys的权限是600，.ssh的权限是700，否则失败。
	* 参考资料：[阮一峰博客](http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html)
* https原理：
	* https=http+ssl。tls可以看做是ssl 3.0
	* ssl首先三次握手协商出一个密钥A，协商的过程是非对称加密，目的是为了让双方都知道A，但是密钥传输加密，防止中间人攻击。协商出密钥之后就是对称加密了。
	* 协商密钥的过程，首先客户端先请求服务器拿到服务器的公钥，然后生成密钥A，用公钥加密A传给服务器，然后服务器用私钥解密拿到A。这个过程非常类似ssh的登录过程。
	* 同理，为了防止有人伪造服务器，浏览器需要确认从服务器拿到的公钥是正确的,这时候就需要证书了。有了证书之后，服务器发给客户端的就不是公钥，而是证书。
	* 证书内包含网站的公钥和证书颁发机构，消息摘要算法等信息，这些信息通过生成一个摘要(如md5)，然后用CA（受信任的证书颁发机构）的私钥对这个摘要加密(签名)。这样的证书是没有办法伪造的，因为你没有CA的私钥，你的客户端用CA的公钥解出来的签名肯定是不对的。
	* 关于CA的公钥，当客户端收到信息时，CA的公钥一般装系统时都在电脑里了。
	* 类似12306这种网站，没有去CA买证书，而是需要自己去官网下根证书。这样是不安全的，因为没有上面的验证过程，你必须信任从根证书上拿到的公钥，但是如果根证书被伪造，就很容易被中间人攻击了。
	* 关于CA的证书链，CA分为多级，最高的证书颁发机构成为根证书颁发机构，这个一般内置在操作系统中，证书的认证过程是这样的：rootCA -- CA1 -- CA2。CA2给google颁发了证书。那么证书验证过程中，rootCA信任CA1,CA1信任CA2,CA2信任google,那么这个证书链就打通了，就是说这个证书是受信任的。所谓的信任就是通过用公钥去解密摘要，看和证书里面的是否一致。
	* 参考资料：[数字证书原理](http://blog.csdn.net/u013424496/article/details/51161370)
* 关于签名：
	* 摘要：摘要是对正文信息的md5,本身没有防止攻击的能力
	* 签名：签名是对摘要进行私钥加密，然后验证时用公钥。
	* 签名只能保证信息不被伪造，但是不能保证不被截获，因为消息中大部分内容是不加密的，只要摘要加密。